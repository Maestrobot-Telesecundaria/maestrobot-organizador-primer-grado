<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Actualizaciones del Proyecto</title>

<style>
*{
    box-sizing:border-box;
    font-family:"Segoe UI", Arial, sans-serif;
}

body{
    margin:0;
    width:100vw;
    height:100vh;

    /* ✅ RUTA CORREGIDA */
    background-image:url("../fondos/fondoactualizaciones.png");
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;

    display:flex;
    justify-content:center;
    align-items:center;
}

/* CONTENEDOR PRINCIPAL */
.contenedor{
    width:90%;
    max-width:1000px;
    height:80%;
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:40px;
}

/* TEXTO */
.texto{
    width:55%;
    color:#6b3e2e;
}

.texto h1{
    font-size:48px;
    margin-bottom:25px;
    font-weight:500;
}

.texto p{
    font-size:20px;
    line-height:1.6;
}

/* BOTÓN ACTUALIZAR */
.boton-area{
    width:40%;
    display:flex;
    justify-content:center;
}

.boton-actualizar{
    padding:14px 38px;
    font-size:18px;
    border:none;
    border-radius:25px;
    background:#ffffff;
    color:#6b3e2e;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 6px 15px rgba(0,0,0,.2);
    transition:all .3s ease;
}

.boton-actualizar:hover{
    background:#f3f3f3;
    transform:scale(1.05);
}

/* BOTÓN REGRESAR */
.boton-regresar{
    position:fixed;
    bottom:20px;
    left:20px;
    padding:12px 20px;
    font-size:15px;
    font-weight:bold;
    border:none;
    border-radius:10px;
    background:#355e3b;
    color:white;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,.3);
    z-index:1000;
}

.boton-regresar:hover{
    background:#2a4a2f;
}
</style>
</head>

<body>

<div class="contenedor">
    <div class="texto">
        <h1>¡Actualízate!</h1>
        <p>
            Cada que haya una actualización puedes descargarla
            en el siguiente botón
        </p>

        <!-- ESTADO -->
        <p id="estado-actualizacion" style="margin-top:20px; font-weight:600;">
            Estado: esperando acción…
        </p>

        <!-- BARRA DE PROGRESO -->
        <div style="margin-top:15px;">
            <div style="
                width:100%;
                height:14px;
                background:#e0e0e0;
                border-radius:10px;
                overflow:hidden;
            ">
                <div id="barra-progreso" style="
                    height:100%;
                    width:0%;
                    background:#6b3e2e;
                    transition:width .3s ease;
                "></div>
            </div>
            <div id="porcentaje" style="margin-top:6px; font-weight:600;">
                0%
            </div>
        </div>
    </div>

    <div class="boton-area">
        <button class="boton-actualizar" id="btnActualizar">
            ACTUALIZAR
        </button>
    </div>
</div>

<!-- BOTÓN REGRESAR -->
<button class="boton-regresar" onclick="regresarMenu()">
    REGRESAR
</button>

<script>
const estado = document.getElementById("estado-actualizacion");
const barra = document.getElementById("barra-progreso");
const porcentaje = document.getElementById("porcentaje");

document.getElementById("btnActualizar").addEventListener("click", () => {
    estado.innerText = "Estado: Buscando actualizaciones…";

    if (window.api && window.api.buscarActualizacion) {
        window.api.buscarActualizacion();
    }
});

// Mensajes generales de actualización
if (window.api && window.api.onMensajeActualizacion) {
    window.api.onMensajeActualizacion((mensaje) => {
        estado.innerText = "Estado: " + mensaje;
    });
}

// Progreso REAL de descarga
if (window.api && window.api.onProgresoActualizacion) {
    window.api.onProgresoActualizacion((data) => {
        const progreso = Math.round(data.percent);
        barra.style.width = progreso + "%";
        porcentaje.innerText = progreso + "%";
    });
}

/* ✅ REGRESAR AL MENÚ */
function regresarMenu(){
    window.location.href = "menu.html";
}
</script>

</body>
</html>
