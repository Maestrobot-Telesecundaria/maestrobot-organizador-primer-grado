<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mediateca</title>

<style>
*{
    box-sizing:border-box;
    font-family:"Segoe UI", Arial, sans-serif;
}

body{
    margin:0;
    padding:20px;
    background:#f2f2f2;
}

/* BARRA SUPERIOR */
.barra-superior{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:15px;
}

#buscador{
    width:70%;
    padding:12px;
    font-size:16px;
    border-radius:6px;
    border:1px solid #ccc;
}

.boton-regresar{
    padding:12px 18px;
    background:#355e3b;
    color:white;
    border:none;
    border-radius:8px;
    font-size:15px;
    font-weight:bold;
    cursor:pointer;
}

.boton-regresar:hover{
    background:#2a4a2f;
}

/* CONTENEDOR */
.contenedor{
    display:flex;
    gap:20px;
}

/* PANEL VIDEO */
.video-panel{
    width:50%;
    min-height:500px;
    background:#000;
    border-radius:8px;
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    font-size:20px;
}

/* LISTA */
.lista{
    width:50%;
    background:white;
    border-radius:8px;
    padding:10px;
    overflow:auto;
    max-height:500px;
}

.item-video{
    padding:10px;
    border-bottom:1px solid #ddd;
    cursor:pointer;
}

.item-video:hover{
    background:#eef3ff;
}
</style>
</head>

<body>

<!-- BARRA -->
<div class="barra-superior">
    <input type="text" id="buscador" placeholder="Buscar video...">
    <button class="boton-regresar" onclick="window.location.href='menu.html'">Regresar</button>
</div>

<!-- CONTENIDO -->
<div class="contenedor">

    <!-- VIDEO -->
    <div class="video-panel" id="videoPanel">
        Selecciona un video
    </div>

    <!-- LISTA -->
    <div class="lista" id="listaVideos">
        Cargando videos...
    </div>

</div>

<script>
// üìÅ Carpeta ra√≠z de videos (FUERA del proyecto)
const CARPETA_VIDEOS = "C:/MaestroBot/videos/";

// Lista completa
let todosLosVideos = [];

// Pedir lista al backend (por preload)
async function cargarVideos(){
    const archivos = await window.electronAPI.leerVideos(CARPETA_VIDEOS);
    todosLosVideos = archivos;
    mostrarLista(archivos);
}

function mostrarLista(lista){
    const contenedor = document.getElementById("listaVideos");

    if(lista.length === 0){
        contenedor.innerHTML = "<p>No hay videos</p>";
        return;
    }

    contenedor.innerHTML = "";

    lista.forEach(ruta => {
        const nombre = ruta.split("/").pop();

        const div = document.createElement("div");
        div.className = "item-video";
        div.textContent = "‚ñ∂ " + nombre;

        div.onclick = () => reproducir(ruta);

        contenedor.appendChild(div);
    });
}

function reproducir(ruta){
    const panel = document.getElementById("videoPanel");
    panel.innerHTML = `
        <video src="${ruta}" controls autoplay style="width:100%; height:100%; border-radius:8px;"></video>
    `;
}

// Buscador
document.getElementById("buscador").addEventListener("input", function(){
    const texto = this.value.toLowerCase();
    const filtrados = todosLosVideos.filter(r => r.toLowerCase().includes(texto));
    mostrarLista(filtrados);
});

// Cargar al iniciar
cargarVideos();
</script>

</body>
</html>
